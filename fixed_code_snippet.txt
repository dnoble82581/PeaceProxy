<div class="flex h-full overflow-hidden">
	<!-- Sidebar with conversation list -->
	<div class="w-1/4 border-r border-gray-200 dark:border-dark-400 pr-2 overflow-y-auto hidden md:block">
		@if($activeTab === 'public')
			<div class="py-2">
				<div class="font-medium text-sm text-gray-500 dark:text-dark-300 mb-2">Public Chat</div>
				@php
					$publicConv = $this->publicConversation();
				@endphp
				@if($publicConv)
					<div
							wire:click="selectConversation({{ $publicConv->id }})"
							class="p-2 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-600 {{ $selectedConversationId === $publicConv->id ? 'bg-gray-100 dark:bg-dark-600 text-dark-800 dark:text-dark-200 border-l-4 border-primary-400 dark:border-primary-500' : '' }}">
						<div class="font-medium text-sm">{{ $publicConv->name }}</div>
						<div class="text-xs text-gray-500 dark:text-dark-300">
							{{ $this->getActiveUsersCount($publicConv) }} participants
						</div>
					</div>
				@else
					<div class="text-sm text-gray-500 dark:text-dark-300">No public chat available</div>
				@endif
			</div>
		@elseif($activeTab === 'private')
			<div class="py-2">
				<div class="font-medium text-sm text-gray-500 dark:text-dark-300 mb-2">Private Chats</div>
				@php
					$privateConvs = $this->privateConversations();
				@endphp
				@if($privateConvs->count() > 0)
					@foreach($privateConvs as $conversation)
						<div
								wire:click="selectConversation({{ $conversation->id }})"
								class="p-2 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-600 {{ $selectedConversationId === $conversation->id ? 'bg-gray-100 dark:bg-dark-600 border-l-4 border-primary-400 dark:border-primary-500' : '' }}">
							<div class="flex justify-between items-center">
								<div class="font-medium text-sm">
									@php
										$otherUser = $this->getOtherUserInPrivateConversation($conversation);
									@endphp
									{{ $otherUser ? $otherUser->name : 'Unknown User' }}
								</div>
								@if($conversation->created_by === auth()->id())
									<button
											wire:click.stop="closeConversation({{ $conversation->id }})"
											class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
										<x-icon
												name="x-mark"
												class="size-4" />
									</button>
								@endif
							</div>
						</div>
					@endforeach
				@else
					<div class="text-sm text-gray-500 dark:text-dark-300">No private chats</div>
				@endif
			</div>
		@endif
	</div>
</div>